(this["webpackJsonpswilv-cra"]=this["webpackJsonpswilv-cra"]||[]).push([[0],{68:function(e,t,c){},69:function(e,t,c){},70:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(0),r=c(17),i=c.n(r),s=c(4),l=c(36),o=c(12),d={},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_DETAIL":return t.payload;default:return e}},j=[],b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_LIST":var c=new Set(e.map((function(e){return e.id})));return e.concat(t.payload.filter((function(e){return!c.has(e.id)})));default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ERROR":return t.payload;case"HIDE_ERROR":return null;default:return e}},h=c(6),f=c.n(h),g=Object(o.c)({user:u,users:b,error:O,loadingBar:h.loadingBarReducer}),v=c(13),p=c(3),x=c(14),m=c(19),_=c.n(m);function E(e){var t=e.children,c=e.label,a=e.loading;return Object(n.jsxs)("div",{className:"field",children:[c&&Object(n.jsxs)("div",{className:"field_key",children:[c,": "]}),Object(n.jsx)("div",{className:"field_value",children:t||(a?Object(n.jsx)("div",{className:"field_skeleton"}):t)})]})}function y(e){var t=e.loading,c=e.src,a=e.small,r=Object(n.jsx)("img",{src:c,className:"".concat(a?"avatar__small":"avatar__big")});return c?r:t?Object(n.jsx)("div",{className:"avatar_skeleton"}):r}var R=function(){var e=Object(s.useDispatch)(),t=Object(p.h)(),c=Object(p.f)(),r=Object(p.g)(),i=Object(a.useState)(!0),l=Object(x.a)(i,2),o=l[0],d=l[1],u=Object(s.useSelector)((function(e){return e})).user;Object(a.useEffect)((function(){e((function(e){e(Object(h.showLoading)()),_.a.get("https://api.github.com/users/".concat(t.params.username)).then((function(t){e({type:"GET_USER_DETAIL",payload:t.data}),d(!1),e(Object(h.hideLoading)())})).catch((function(t){e({type:"SHOW_ERROR",payload:"Error fetching detail info"}),e(Object(h.hideLoading)())}))}))}),[]);var j=new Date(u.created_at);return j=j.toLocaleDateString(),Object(n.jsxs)("div",{className:"user-wr",children:[Object(n.jsx)("button",{className:"btn",onClick:function(){c.push("/",r.state)},style:{display:"block"},children:"back"}),Object(n.jsx)("div",{className:"user_avatar-wr",children:Object(n.jsx)(y,{loading:o,src:u.avatar_url})}),Object(n.jsx)(E,{label:"Login",loading:o,children:u.login}),Object(n.jsx)(E,{label:"Name",loading:o,children:u.name}),Object(n.jsx)(E,{label:"Created_at",loading:o,children:j}),Object(n.jsx)(E,{label:"Followers",loading:o,children:u.followers}),Object(n.jsx)(E,{label:"Following",loading:o,children:u.following}),Object(n.jsx)(E,{label:"Company",loading:o,children:u.company}),Object(n.jsx)(E,{label:"Email",loading:o,children:u.email}),Object(n.jsx)(E,{label:"Location",loading:o,children:u.location}),Object(n.jsx)(E,{label:"Blog",loading:o,children:u.blog}),Object(n.jsx)(E,{label:"Bio",loading:o,children:u.bio})]})},w=function(e){var t=Object(a.useState)(!0),c=Object(x.a)(t,2),n=c[0],r=c[1],i=Object(s.useDispatch)();return Object(a.useEffect)((function(){r(!0),i((function(t){t(Object(h.showLoading)()),_.a.get("https://api.github.com/users",{params:{per_page:30,since:30*e}}).then((function(e){t({type:"GET_USER_LIST",payload:e.data}),r(!1),t(Object(h.hideLoading)())})).catch((function(e){t({type:"SHOW_ERROR",payload:"Error fetching user list"}),t(Object(h.hideLoading)())}))}))}),[e]),{loading:n}},S=function(){var e=Object(p.f)(),t=Object(p.g)(),c=Object(a.useState)(0),r=Object(x.a)(c,2),i=r[0],l=r[1],o=w(i).loading,d=Object(s.useSelector)((function(e){return e})).users,u=Object(s.useDispatch)(),j=Object(a.useRef)();Object(a.useEffect)((function(){var e=document.querySelector(".user-"+t.state);e&&(e.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),e.classList.add("visited"),setTimeout((function(){return e.classList.remove("visited")}),2e3))}),[]);var b=Object(a.useCallback)((function(e){o||(j.current&&j.current.disconnect(),j.current=new IntersectionObserver((function(e){e[0].isIntersecting&&l((function(e){return e+1}))})),e&&j.current.observe(e))}));return Object(n.jsxs)("table",{className:"user-table",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Login"}),Object(n.jsx)("th",{children:"URL"}),Object(n.jsx)("th",{})]})}),Object(n.jsx)("tbody",{children:d&&d.map((function(t,c){return Object(n.jsxs)("tr",{ref:d.length===c+1?b:null,onClick:function(){return c=t.id,n=t.login,u({type:"GET_USER_DETAIL",payload:d.find((function(e){return e.id===c}))}),void e.push("/user/".concat(n),c);var c,n},className:"user-".concat(t.id),children:[Object(n.jsx)("td",{children:t.login}),Object(n.jsx)("td",{children:Object(n.jsx)(v.b,{hint:"Enter",to:{pathname:t.html_url},target:"_blank",onClick:function(e){return e.stopPropagation()},className:"user-url",children:t.html_url})}),Object(n.jsx)("td",{children:Object(n.jsx)(y,{src:t.avatar_url,small:!0})})]},t.id)}))})]})},L=(c(68),c(69),function(){return Object(n.jsx)(v.a,{children:Object(n.jsxs)(p.c,{children:[Object(n.jsx)(p.a,{path:"/user/:username",children:Object(n.jsx)(R,{})}),Object(n.jsx)(p.a,{path:"/",children:Object(n.jsx)(S,{})})]})})});function N(){var e=Object(s.useSelector)((function(e){return e})).error,t=Object(s.useDispatch)();return e?Object(n.jsxs)("div",{className:"error-modal",children:[Object(n.jsx)("div",{onClick:function(){t({type:"HIDE_ERROR"})},className:"close-btn"}),e]}):null}var k=Object(o.d)(g,Object(o.a)(l.a,Object(h.loadingBarMiddleware)()));i.a.render(Object(n.jsxs)(s.Provider,{store:k,children:[Object(n.jsx)(f.a,{className:"loader"}),Object(n.jsx)(N,{}),Object(n.jsx)(L,{})]}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.a4bd90a4.chunk.js.map